"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3129],{3129:(D,h,c)=>{c.r(h),c.d(h,{HomePageModule:()=>F});var g=c(177),a=c(4742),m=c(4341),p=c(6766),e=c(3953),f=c(8273),_=c(5946),k=c(6252);let M=(()=>{var i;class r{constructor(t,n){this.httpGet=t,this.httpPost=n}getUserResponsesByUserId(t){return this.httpGet.list(`response/user/${t}`)}saveResponse(t,n){return this.httpPost.post(`user-response/new/${t}`,n)}getUserResponse(t,n){return this.httpGet.one(`response/user/${t}/question/${n}`)}}return(i=r).\u0275fac=function(t){return new(t||i)(e.KVO(_.t),e.KVO(k.X))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),r})();var x=c(98),T=c(9561),v=c(2416);let C=(()=>{var i;class r{constructor(t,n,s,l){this.httpGet=t,this.httpPost=n,this.httpDelete=s,this.httpPatch=l}listAll(){return this.httpGet.list("categories")}getOne(t){return this.httpGet.one(`categories/${t}`)}createCategory(t){return this.httpPost.post("categories",t)}deleteCategory(t){return this.httpDelete.delete(`categories/${t}`)}patchCategory(t,n){return this.httpPatch.patch(`categories/${t}`,n)}}return(i=r).\u0275fac=function(t){return new(t||i)(e.KVO(_.t),e.KVO(k.X),e.KVO(T.O),e.KVO(v.r))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),r})();var P=c(7830),j=c(4104);function b(i,r){if(1&i){const o=e.RV6();e.qex(0),e.j41(1,"ion-card",22)(2,"ion-label",23),e.EFF(3),e.k0s(),e.j41(4,"ion-icon",24),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.toggleEditTask(n))}),e.k0s()(),e.j41(5,"ion-label",25),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.bVm()}if(2&i){const o=e.XpG(),t=o.$implicit,n=o.index,s=e.XpG();e.R7$(),e.Y8G("color",s.colors[n%s.colors.length]),e.R7$(2),e.JRh(t.name),e.R7$(3),e.JRh(e.i5U(7,3,t.taskTime,"shortTime"))}}function w(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-datetime",32),e.mxI("ngModelChange",function(n){e.eBV(o);const s=e.XpG(2).$implicit;return e.DH7(s.taskTime,n)||(s.taskTime=n),e.Njj(n)}),e.k0s()}if(2&i){const o=e.XpG(2),t=o.$implicit;e.Mz_("id","datetime-",o.index,""),e.R50("ngModel",t.taskTime)}}function O(i,r){if(1&i){const o=e.RV6();e.qex(0),e.j41(1,"ion-card",26)(2,"ion-input",27),e.mxI("ngModelChange",function(n){e.eBV(o);const s=e.XpG().$implicit;return e.DH7(s.name,n)||(s.name=n),e.Njj(n)}),e.k0s(),e.nrm(3,"ion-datetime-button",28),e.j41(4,"ion-modal",29),e.DNE(5,w,1,3,"ng-template"),e.k0s(),e.j41(6,"ion-icon",30),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.saveTask(n))}),e.k0s(),e.j41(7,"ion-icon",31),e.bIt("click",function(){e.eBV(o);const n=e.XpG().$implicit,s=e.XpG();return e.Njj(s.cancelEditTask(n))}),e.k0s()(),e.bVm()}if(2&i){const o=e.XpG(),t=o.$implicit,n=o.index,s=e.XpG();e.R7$(),e.Y8G("color",s.colors[n%s.colors.length]),e.R7$(),e.R50("ngModel",t.name),e.R7$(),e.Mz_("datetime","datetime-",n,""),e.R7$(),e.Y8G("keepContentsMounted",!0)}}function R(i,r){if(1&i&&(e.qex(0),e.j41(1,"div",20),e.DNE(2,b,8,6,"ng-container",21)(3,O,8,5,"ng-container",21),e.k0s(),e.bVm()),2&i){const o=r.$implicit;e.R7$(2),e.Y8G("ngIf",!o.isEditing),e.R7$(),e.Y8G("ngIf",o.isEditing)}}function y(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-datetime",37),e.mxI("ngModelChange",function(n){e.eBV(o);const s=e.XpG(2);return e.DH7(s.newTask.taskTime,n)||(s.newTask.taskTime=n),e.Njj(n)}),e.k0s()}if(2&i){const o=e.XpG(2);e.R50("ngModel",o.newTask.taskTime)}}function I(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-card",33)(1,"div",20)(2,"ion-input",34),e.mxI("ngModelChange",function(n){e.eBV(o);const s=e.XpG();return e.DH7(s.newTask.name,n)||(s.newTask.name=n),e.Njj(n)}),e.k0s(),e.nrm(3,"ion-datetime-button",35),e.j41(4,"ion-modal",29),e.DNE(5,y,1,1,"ng-template"),e.k0s(),e.j41(6,"div",36)(7,"ion-icon",30),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.saveTaskCard(n.newTask.name,n.newTask.taskTime))}),e.k0s(),e.j41(8,"ion-icon",31),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.cancelTask())}),e.k0s()()()()}if(2&i){const o=e.XpG();e.Y8G("color",o.colors[o.tasks.length%o.colors.length]),e.R7$(2),e.R50("ngModel",o.newTask.name),e.R7$(2),e.Y8G("keepContentsMounted",!0)}}function S(i,r){if(1&i){const o=e.RV6();e.j41(0,"div",38)(1,"ion-button",39),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.addTaskCard())}),e.EFF(2," Ajouter une tache "),e.k0s()()}}const H=[{path:"",component:(()=>{var i;class r{constructor(t,n,s,l,u,d,X){this.questionService=t,this.responseService=n,this.authService=s,this.categorieService=l,this.taskService=u,this.router=d,this.menu=X,this.questions=[],this.userResponseslist={},this.currentUser=null,this.showResponses=!1,this.showCategories=!1,this.showTasks=!1,this.categories=[],this.postItMemo="",this.isEditingMemo=!1,this.isAddingTask=!1,this.newTask={description:"",id:0,taskDate:"",user:"",name:"",taskTime:(new Date).toISOString(),status:"pending"},this.colors=["primary","secondary","tertiary","success","warning","danger","light"],this.tasks=[],this.dateString="",this.timeString=""}ngOnInit(){this.authService.currentUser$.subscribe(u=>{var d;this.currentUser=u,this.loadQuestions(),null!=this.currentUser&&this.loadUserResponsesForUser(null===(d=this.currentUser)||void 0===d?void 0:d.id)});const t=localStorage.getItem("postItMemo");t&&(this.postItMemo=t),this.loadTasks(),this.loadMemo();const n=new Date;let s=n.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"});s=s.charAt(0).toUpperCase()+s.slice(1);const l=n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});this.dateString=s,this.timeString=l}fetchCategories(){this.categorieService.listAll().subscribe(t=>{this.categories=t},t=>{console.error("Error fetching categories",t)})}loadQuestions(){this.questionService.listAll().subscribe(t=>{this.questions=t})}toggleDisplay(t){this.showResponses="responses"===t,this.showCategories="categories"===t,this.showTasks="tasks"===t}loadUserResponsesForUser(t){this.responseService.getUserResponsesByUserId(t).subscribe({next:n=>{n.forEach(s=>{this.userResponseslist[s.questionId]=s})},error:n=>{console.error(`Error fetching responses for user ${t}:`,n)}})}loadTasks(){this.taskService.getTasksByUserForToday().subscribe(t=>{this.tasks=t.map(n=>({...n,isEditing:!1}))})}toggleEditTask(t){t.isEditing=!0}saveTask(t){t.isEditing=!1,t.id&&this.taskService.updateTask(t.id,{name:t.name,taskTime:t.taskTime}).subscribe(()=>{this.loadTasks()})}cancelEditTask(t){t.isEditing=!1,this.loadTasks()}addTaskCard(){this.isAddingTask=!0}saveTaskCard(t,n){this.newTask={description:"",taskDate:(new Date).toISOString(),user:this.currentUser?this.currentUser.id.toString():"",name:t,taskTime:n,status:"pending"},this.taskService.addTask(this.newTask).subscribe({next:s=>{this.tasks.push({...s,isEditing:!1}),this.isAddingTask=!1},error:s=>{console.error("Erreur lors de la cr\xe9ation de la t\xe2che:",s)}}),this.newTask={description:"",id:0,taskDate:"",user:"",name:"",taskTime:(new Date).toISOString(),status:"pending"}}cancelTask(){this.newTask={description:"",taskDate:"",user:"",name:"",taskTime:(new Date).toISOString(),status:"pending"},this.isAddingTask=!1}updateMemo(){this.isEditingMemo=!0}saveMemo(){localStorage.setItem("postItMemo",this.postItMemo),this.isEditingMemo=!1}loadMemo(){const t=localStorage.getItem("postItMemo");t&&(this.postItMemo=t)}openMenu(){this.menu.open("main-menu")}goToRoutine(){this.router.navigate(["/routine"]),this.menu.close()}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(f.w),e.rXU(M),e.rXU(x.u),e.rXU(C),e.rXU(P.R),e.rXU(p.Ix),e.rXU(a._t))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-home"]],decls:31,vars:6,consts:[[1,"oc-style"],["contentId","main-content","menuId","main-menu","side","end","swipeGesture","true"],["color","primary"],[1,"ion-padding"],["id","main-content",1,"main-container"],[1,"menu-button",3,"click"],["name","reorder-three","size","large"],[1,"d-flex","justify-content-center","align-content-center","flex-column"],[1,"date-text"],[1,"time-text"],[1,"d-flex","justify-content-around","w-100"],[1,"card-white","weather","m-0"],[1,"card-white","character","m-0"],[1,"task-list","card-white"],[4,"ngFor","ngForOf"],[3,"color",4,"ngIf"],["class","add-task",4,"ngIf"],[1,"memo-container"],[1,"memo-header"],["placeholder","Cliquez pour ajouter une note...",1,"memo",3,"ngModelChange","ngModel"],[1,"task-item"],[4,"ngIf"],[1,"task-card",3,"color"],[1,"task-name"],["name","pencil-outline","size","large",1,"task-icon",3,"click"],[1,"task-time"],[1,"add-task-card",3,"color"],["placeholder","Nom de la t\xe2che",3,"ngModelChange","ngModel"],[1,"time-picker-button",3,"datetime"],[3,"keepContentsMounted"],["name","checkmark-circle-outline","size","large",3,"click"],["name","close-circle-outline","size","large",3,"click"],["presentation","time","display-format","HH:mm",3,"ngModelChange","id","ngModel"],[3,"color"],["placeholder","T\xe2che","required","",3,"ngModelChange","ngModel"],["datetime","task-time-picker"],[2,"display","flex","justify-content","space-between","margin-top","10px"],["id","task-time-picker","presentation","time","cancel-text","Annuler","done-text","OK",3,"ngModelChange","ngModel"],[1,"add-task"],[1,"add-task-button",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0)(1,"ion-menu",1)(2,"ion-header")(3,"ion-toolbar",2)(4,"ion-title"),e.EFF(5,"Routine"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-list"),e.nrm(8,"app-routine-list"),e.k0s()()(),e.j41(9,"div",4)(10,"ion-buttons",5),e.bIt("click",function(){return n.openMenu()}),e.nrm(11,"ion-icon",6),e.k0s(),e.j41(12,"ion-grid",7)(13,"ion-text",8),e.EFF(14),e.k0s(),e.j41(15,"ion-text",9),e.EFF(16),e.k0s()(),e.j41(17,"ion-row",10)(18,"ion-card",11),e.EFF(19," TEMPS DEGRES "),e.k0s(),e.j41(20,"ion-card",12),e.EFF(21," PERSO "),e.k0s()(),e.j41(22,"ion-card",13),e.DNE(23,R,4,2,"ng-container",14)(24,I,9,3,"ion-card",15)(25,S,3,0,"div",16),e.k0s(),e.j41(26,"div",17)(27,"div",18)(28,"b"),e.EFF(29,"MEMO"),e.k0s()(),e.j41(30,"ion-textarea",19),e.mxI("ngModelChange",function(l){return e.DH7(n.postItMemo,l)||(n.postItMemo=l),l}),e.k0s()()()()),2&t&&(e.R7$(14),e.SpI(" ",n.dateString," "),e.R7$(2),e.SpI(" ",n.timeString," "),e.R7$(7),e.Y8G("ngForOf",n.tasks),e.R7$(),e.Y8G("ngIf",n.isAddingTask),e.R7$(),e.Y8G("ngIf",!n.isAddingTask),e.R7$(5),e.R50("ngModel",n.postItMemo))},dependencies:[g.Sq,g.bT,m.BC,m.YS,m.vS,a.Jm,a.QW,a.b_,a.W9,a.A9,a.K4,a.lO,a.eU,a.iq,a.$w,a.he,a.nf,a.oS,a.ln,a.IO,a.nc,a.BC,a.ai,a.Sb,a.Je,a.Gw,j.g,g.vh],styles:['@charset "UTF-8";.oc-style[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;padding:2vh 5vw}.menu-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:100}.task-list[_ngcontent-%COMP%]{width:100%}.task-item-add[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1vh 2vw}.task-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1vh 2vw}.task-icon[_ngcontent-%COMP%]{font-size:20px}.task-name[_ngcontent-%COMP%]{font-weight:700;color:#000}.task-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:80%;margin:5px auto;padding:5px;font-size:1.5rem;transition:width .2s ease-in-out}.task-time[_ngcontent-%COMP%]{color:#000;font-weight:700}.memo-container[_ngcontent-%COMP%]{position:relative;padding:15px;background-color:#fff;border-radius:8px;margin:20px 0;width:90%;max-width:500px;max-height:200px;box-shadow:0 10px 15px -3px #0000001a}.memo[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px;overflow-y:auto}.memo-header[_ngcontent-%COMP%]{text-align:center}.edit-button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background-color:transparent;border:none;padding:8px;display:flex;align-items:center;justify-content:center;z-index:10}.save-button[_ngcontent-%COMP%]{width:calc(100% - 30px);margin:10px auto 0;background-color:#56c174;border:none;padding:10px;color:#fff;border-radius:5px;cursor:pointer;display:block}ion-textarea[_ngcontent-%COMP%]{width:100%;height:20vh;border-radius:5px;padding:2vw;font-size:1rem;color:#333}ion-button[_ngcontent-%COMP%]{--background: #4caf50;--background-activated: #388e3c}.add-task[_ngcontent-%COMP%]{display:flex;justify-content:center}.add-task-button[_ngcontent-%COMP%]{--background: #DCECD0;font-size:1.5rem;padding:0}.addT[_ngcontent-%COMP%]{font-size:20px;color:#fff}.add-task-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;transition:width .2s ease-in-out;margin:5px auto;padding:5px;font-size:1.5rem}.add-task-card[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin:2px}.add-task-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:.8rem}.add-task-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.task-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.task-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;margin-left:10px}.time-input[_ngcontent-%COMP%]{max-width:80px}.date-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.time-text[_ngcontent-%COMP%]{text-align:center;font-size:3rem;font-weight:700}.card-white[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px}.weather[_ngcontent-%COMP%]{width:220px;height:120px}.character[_ngcontent-%COMP%]{width:90px;height:120px}']}),r})()}];let G=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[p.iI.forChild(H),p.iI]}),r})();var E=c(8658);let F=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.MD,m.YN,a.bv,G,E.RoutineListPageModule]}),r})()}}]);